<head>
<script src="jquery-3.7.1.min.js"></script>
</head>
<script>

function updateWeather(inQ){
	console.log("calling API for "+inQ);
	$.get("requests.php?location=" + inQ, function(data,status){
		var myJson = JSON.parse(data);
		
		if(myJson.error != null)
		{
			alert(myJson.error.message);
			return;
		}
		
		var temp = parseFloat(myJson.current.temp_f).toPrecision(1);
		var loc = myJson.location.name + ", " + myJson.location.region;
		temp -= 72;
		document.getElementById("temp").innerHTML = temp + "&deg;S";
		document.getElementById("loc").innerHTML = loc;
		var iconUrl = myJson.current.condition.icon;
		iconUrl = iconUrl.substring(2);	
		iconUrl = "https://"+iconUrl;
		document.getElementById("weather_icon").src = iconUrl;
		document.getElementById("updated_time").innerHTML = "Updated: " + myJson.current.last_updated;
	});
	
}

</script>

<style>
	
	.info_text {
		color: black;
		font-size: 2em;
	}
	
	.card {
	  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
	  transition: 0.3s;
	  width: 75%;
	  border-radius: 25px;
	  background-color: aquamarine;
	  color: white;
	  font-family: sans-serif;
	  font-weight: bold;
	  font-size:10em;
	  padding-top: 10%;
	  padding-bottom: 10%;
	}
	.card-sm {
	  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
	  transition: 0.3s;
	  width: 75%;
	  padding-top: 2%;
	  padding-bottom: 2%;
	  border-radius: 15px;
	  background-color: cadetblue;
	  color: white;
	  font-family: sans-serif;
	  font-weight: bold;
	  font-size:2em;
	}
	
	.input {
	  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
	  transition: 0.3s;
	  width: 50%;
	  padding-top: 2%;
	  padding-bottom: 2%;
	  border-radius: 15px;
	  background-color: white;
	  color: black;
	  font-family: sans-serif;
	  font-weight: bold;
	  font-size:5em;
	  text-align: center;
	}
	
	.button {
	  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
	  transition: 0.3s;
	  width: 25%;
	  padding-top: 2%;
	  padding-bottom: 2%;
	  border-radius: 15px;
	  background-color: cadetblue;
	  color: white;
	  font-family: sans-serif;
	  font-weight: bold;
	  font-size:5em;
	}

	.card:hover {
	  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
	}
	.card-sm:hover {
	  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
	}

	.container {
	  padding: 2px 16px;
	}
	
	.span {
	}
	
	
</style>

<html>
	<body onLoad="updateWeather('04038');">
		<div align="center">
			<div class="card">
				<div class="container">
					<img src="https://static.thenounproject.com/png/275465-200.png" width="20%" id="weather_icon" alt="weather icon">
					<br>
					<span id="temp">...</span>					
				</div>
			</div>
			<p class="info_text" id="updated_time"></p>
		</div>		
		<br>
		<div align="center">
			<div class="card-sm">
				<div class="container">
					<p id="loc"></p>
				</div>
			</div>
		</div>
		<br>
		<div align="center">
				<div class="container">
					<input class="input" size="5" id="zipcode" type="number" value="04038">
					<button class="button" onclick="updateWeather(document.getElementById('zipcode').value);">OK</button>
				</div>
		</div>
		
	</body>
</html>